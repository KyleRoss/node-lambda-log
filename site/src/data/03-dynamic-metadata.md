---
title: 'Dynamic Metadata'
slug: 'dynamic-metadata'
order: 3
---

# Dynamic Metadata
Since version 2.0.0, Lambda Log facilitates a concept of dynamically adding metadata to log messages. Dynamic Metadata is generated by the results of calling a function defined in `log.options.dynamicMeta` for each log message that is generated. This gives the ability to set metadata that may be time-based or changes on a regular basis within your application without needing to manually set the data on each log message.

<alert type="warn">**Note:** Dynamic Metadata can only utilize synchronous data. Trying to utilize asynchronous data via the Dynamic Metadata function will not work.</alert>

### Setting Dynamic Metadata
A Dynamic Metadata function can be set by either passing in as the option `dynamicMeta` when creating a new instance of [LambdaLog](/docs/api#lambdalog) or by setting `log.options.dynamicMeta` on a pre-existing instance of LambdaLog.

**On new instance of LambdaLog:**
```js
const { LambdaLog } = require('lambda-log');
const log = new LambdaLog({
  dynamicMeta() {
    // ...
  }
});
```

**On existing instance of LambdaLog:**
```js
const log = require('lambda-log');

log.options.dynamicMeta = function() {
  // ...
};
```

### Dynamic Metadata Function
The function signature for Dynamic Metadata is as defined below:

#### <h type="function" text="function(msg, options)">
For each log message, this function will be called in order to obtain dynamic metadata to include. This function must return an object with dynamic metadata to be added. Any properties returned from this function that already exist in the metadata will be overwritten. To skip adding metadata to the log message, you may return `false`, `null`, or an empty object from this function.

**Scope:** [LogMessage](/docs/api#logmessage) â€” The LogMessage instance for the given log.

| Parameter | Type | Description |
| --------- | ---- | ----------- |
| msg | `LogMessage` | The instance of [LogMessage](/docs/api#logmessage) for the current log. |
| options | `Object` | The options object from the LambdaLog instance. |

### Examples

**Add Timestamp to all Log Messages:**
```js
log.options.dynamicMeta = function() {
  return {
    timestamp: new Date().toISOString()
  };
};
```

**Add UUID to all Error Logs:**
```js
const uuid = require('uuid');

log.options.dynamicMeta = function(message) {
  if(message.level === 'error') {
    return {
      errorId: uuid.v4()
    }
  }

  return null;
};
```

**Add a Value from a Global Variable:**
```js
let myGlobal = 'some-value-that-changes';

log.options.dynamicMeta = function() {
  return {
    prop: myGlobal
  }
};
```
